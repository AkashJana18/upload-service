# Changelog

## 1.0.0 (2024-11-27)


### âš  BREAKING CHANGES

* allow invocation configuration to be generated on demand ([#1507](https://github.com/storacha/upload-service/issues/1507))
* `AllocationsStorage` and `BlobsStorage` methods not take `MultihashDigest` types instead of `Uint8Array`s.
* updates agent-store api to unblock integration with w3infra ([#1479](https://github.com/storacha/upload-service/issues/1479))
* **upload-api:** integrate agent store for idempotence & invocation/receipt persistence  ([#1444](https://github.com/storacha/upload-service/issues/1444))
* add download URL method to `BlobsStorage` ([#1469](https://github.com/storacha/upload-service/issues/1469))
* delegated capabilities required to use `uploadFile`, `uploadDirectory` and `uploadCAR` have changed. In order to use these methods your agent will now need to be delegated `blob/add`, `index/add`, `filecoin/offer` and `upload/add` capabilities. Note: no code changes are required.
* deprecate issuer ([#1344](https://github.com/storacha/upload-service/issues/1344))
* add `index/add` handler ([#1421](https://github.com/storacha/upload-service/issues/1421))
* restrict store API to CARs ([#1415](https://github.com/storacha/upload-service/issues/1415))
* dataStore in storefront renamed to contentStore
* **capabilities:** `BlobMultihash` type in `@web3-storage/capabilities` renamed to `Multihash`.
* allocations storage interface now requires remove to be implemented
* not possible to skip submit queue on storefront service anymore
* release upload api with new filecoin api service for storefront ([#1347](https://github.com/storacha/upload-service/issues/1347))
* return allocated bytes in `store/add` receipt ([#1213](https://github.com/storacha/upload-service/issues/1213))
* coupon ([#1136](https://github.com/storacha/upload-service/issues/1136))
* tweak readmes to get release-please to bump major version ([#1102](https://github.com/storacha/upload-service/issues/1102))
* add storefront filecoin api to upload api ([#1052](https://github.com/storacha/upload-service/issues/1052))

### Features

* access agent proofs method would fail to return some session proofs ([#1047](https://github.com/storacha/upload-service/issues/1047)) ([d23a1c9](https://github.com/storacha/upload-service/commit/d23a1c972f91b855ee91f862da15bab0e68cca0a))
* account.plan.get method ([#1117](https://github.com/storacha/upload-service/issues/1117)) ([1385a9c](https://github.com/storacha/upload-service/commit/1385a9c4f722e678090fc4371a0c4959cef3c6cd))
* add "plan/create-admin-session" capability ([#1411](https://github.com/storacha/upload-service/issues/1411)) ([50eeeb5](https://github.com/storacha/upload-service/commit/50eeeb502335ba0413318b5047869a275901824b))
* add `index/add` handler ([#1421](https://github.com/storacha/upload-service/issues/1421)) ([cbe9524](https://github.com/storacha/upload-service/commit/cbe952451b719fe7ae2f7480d26865eca80aba55))
* add `initialize` method to `PlansStorage` ([#1278](https://github.com/storacha/upload-service/issues/1278)) ([6792126](https://github.com/storacha/upload-service/commit/6792126d63a1e983713c3886eeba64038cb7cf34))
* add `set` method to `AccountPlan` ([#1281](https://github.com/storacha/upload-service/issues/1281)) ([b94f0d4](https://github.com/storacha/upload-service/commit/b94f0d48ea71454cef867feb9291c500f676faa3))
* add `subscription/list` capability ([#1088](https://github.com/storacha/upload-service/issues/1088)) ([471d7e5](https://github.com/storacha/upload-service/commit/471d7e5db24e12a06c1c52ae76bf95ff9471bac8))
* add a function to verify and return Abilities. ([#1252](https://github.com/storacha/upload-service/issues/1252)) ([2f026a2](https://github.com/storacha/upload-service/commit/2f026a2483a4f323c4e2c6a8a8cb10afd92e21c4))
* add blob list and remove ([#1385](https://github.com/storacha/upload-service/issues/1385)) ([2f69946](https://github.com/storacha/upload-service/commit/2f6994600e8cc0f70cedc5afe06003a2a0b70af3))
* add blob protocol to upload-client ([#1425](https://github.com/storacha/upload-service/issues/1425)) ([49aef56](https://github.com/storacha/upload-service/commit/49aef564a726d34dbbedbd83f5366d9320180f99))
* add blob/get ([#1484](https://github.com/storacha/upload-service/issues/1484)) ([328039d](https://github.com/storacha/upload-service/commit/328039d8a29fec3c1bbab28d1bb9de1643f54f71))
* add CLI ([#39](https://github.com/storacha/upload-service/issues/39)) ([112720e](https://github.com/storacha/upload-service/commit/112720e098d24b49e4f142fe52c2a1d316e5353f))
* add download URL method to `BlobsStorage` ([#1469](https://github.com/storacha/upload-service/issues/1469)) ([4a2c994](https://github.com/storacha/upload-service/commit/4a2c99478fdcb129da260c1fc14da0ba1842e5ff))
* add remove high level function to client ([#1248](https://github.com/storacha/upload-service/issues/1248)) ([104b8de](https://github.com/storacha/upload-service/commit/104b8deaf487320f682540aff7fbeede26eca861))
* add script for creating delegations ([#40](https://github.com/storacha/upload-service/issues/40)) ([7ce123b](https://github.com/storacha/upload-service/commit/7ce123bea3f41114aa158f4def481eac91371774))
* add store.get and upload.get to clients ([#1178](https://github.com/storacha/upload-service/issues/1178)) ([d1be42a](https://github.com/storacha/upload-service/commit/d1be42a642e04d290710e824dc4c9b924de8d8ac))
* add storefront filecoin api to upload api ([#1052](https://github.com/storacha/upload-service/issues/1052)) ([39916c2](https://github.com/storacha/upload-service/commit/39916c25cbbfce6392fbb7cc71112987185c798c))
* add support to prepend pieces while buffering to aggregate ([#1301](https://github.com/storacha/upload-service/issues/1301)) ([dff1846](https://github.com/storacha/upload-service/commit/dff1846ad8b6ff5bb9e5fd8ff71f79df5bf79e4d))
* add usage/report capability ([#1079](https://github.com/storacha/upload-service/issues/1079)) ([6418b4b](https://github.com/storacha/upload-service/commit/6418b4b22329a118fb258928bd9a6a45ced5ce45))
* aggregator keeping oldest piece ts ([#1188](https://github.com/storacha/upload-service/issues/1188)) ([97a7def](https://github.com/storacha/upload-service/commit/97a7defa433b57591f23eddee692445437a718a1))
* allow invocation configuration to be generated on demand ([#1507](https://github.com/storacha/upload-service/issues/1507)) ([fd74cbb](https://github.com/storacha/upload-service/commit/fd74cbb9a59c10f1688a5994dd2cdc6722be00be))
* api waits for trigger filecoin pipeline from the client ([#1332](https://github.com/storacha/upload-service/issues/1332)) ([421bacb](https://github.com/storacha/upload-service/commit/421bacb9bac8c251cb41f887144e953feaa5558f))
* blob, web3.storage and ucan conclude capabilities together with api handlers  ([#1342](https://github.com/storacha/upload-service/issues/1342)) ([00735a8](https://github.com/storacha/upload-service/commit/00735a80dfddbe86359af78ed9bd182f4804691f))
* byo piece hasher ([#1323](https://github.com/storacha/upload-service/issues/1323)) ([fe2e3d5](https://github.com/storacha/upload-service/commit/fe2e3d5cdca8ba16eadafdc3c6eb2fed37118cd9))
* **capabilities:** add `index/add` capability ([#1410](https://github.com/storacha/upload-service/issues/1410)) ([1b71b89](https://github.com/storacha/upload-service/commit/1b71b89ed989cde8ef4bf35c1ebc333872cbc54c))
* change `plan/update` to `plan/set` and use existing `PlansStorage#set` to implement an invocation handler ([#1258](https://github.com/storacha/upload-service/issues/1258)) ([1ccbfe9](https://github.com/storacha/upload-service/commit/1ccbfe9f84ae5b2e99e315c92d15d2b54e9723ba))
* **client:** optional account recovery ([#1546](https://github.com/storacha/upload-service/issues/1546)) ([ea02adb](https://github.com/storacha/upload-service/commit/ea02adb77cfe207a5823e24d886d28b6650ecc03))
* configure UnixFS encoder ([#1509](https://github.com/storacha/upload-service/issues/1509)) ([1a5e648](https://github.com/storacha/upload-service/commit/1a5e64817d20525c456b78eea22da8189b5748b1))
* coupon ([#1136](https://github.com/storacha/upload-service/issues/1136)) ([1b94f2d](https://github.com/storacha/upload-service/commit/1b94f2d3f6538d717d38b21dcb76657fd1f3e268))
* deprecate issuer ([#1344](https://github.com/storacha/upload-service/issues/1344)) ([afbbde3](https://github.com/storacha/upload-service/commit/afbbde340d974792699dc56946cc1c72f74c09e3))
* dont use ipfs-utils fetch with upload progress by default  ([#1240](https://github.com/storacha/upload-service/issues/1240)) ([86aedbc](https://github.com/storacha/upload-service/commit/86aedbcb070ae67093f30b2b724766dee4c43f2c))
* export Account so we can use it in w3ui ([#1116](https://github.com/storacha/upload-service/issues/1116)) ([9c7266e](https://github.com/storacha/upload-service/commit/9c7266ea296e567784feba62e2737d5d700bf2ac))
* export PlanSet{Success|Failure} from w3up-client ([#1291](https://github.com/storacha/upload-service/issues/1291)) ([47a2954](https://github.com/storacha/upload-service/commit/47a2954630097df220d1998f29a9026764b7e76c))
* export test external service implementations ([2a2eb0c](https://github.com/storacha/upload-service/commit/2a2eb0c0280da85d514c8bca99fc8eea9fa0aa4a))
* expose accounts list on client instance ([#1109](https://github.com/storacha/upload-service/issues/1109)) ([1810684](https://github.com/storacha/upload-service/commit/1810684e1a21109a8f03685eb9a15ae5b2bc1782))
* expose OwnedSpace and SharedSpace from access-client ([#1244](https://github.com/storacha/upload-service/issues/1244)) ([8ec1b44](https://github.com/storacha/upload-service/commit/8ec1b446590399aa236904c1b6937b7be5d83054))
* expose test context of upload-api ([#1069](https://github.com/storacha/upload-service/issues/1069)) ([f0757d1](https://github.com/storacha/upload-service/commit/f0757d15fbe653ae4914960ac401385afd752e57))
* filecoin info ([#1091](https://github.com/storacha/upload-service/issues/1091)) ([adb2442](https://github.com/storacha/upload-service/commit/adb24424d1faf50daf2339b77c22fdd44faa236a))
* **filecoin-api:** allow custom hashing function to be passed to aggregate builder ([#1553](https://github.com/storacha/upload-service/issues/1553)) ([e2653d4](https://github.com/storacha/upload-service/commit/e2653d40c45070e2ccdc5cbda4eb4a35dab302e5))
* **filecoin-api:** paginated queries ([#1521](https://github.com/storacha/upload-service/issues/1521)) ([25ed7d7](https://github.com/storacha/upload-service/commit/25ed7d7e5208d85c49c18585adb5d8667b81f085))
* generate sharded DAG index on client and invoke w `index/add` ([#1451](https://github.com/storacha/upload-service/issues/1451)) ([a6d9026](https://github.com/storacha/upload-service/commit/a6d9026536e60c0ce93b613acc6e337f2a21aeb2))
* Generate Space proofs on the fly, on `access/claim` ([#1555](https://github.com/storacha/upload-service/issues/1555)) ([9e2b1d4](https://github.com/storacha/upload-service/commit/9e2b1d4dc721d3e61cea008719d172909c984344))
* get receipt support in client ([#1135](https://github.com/storacha/upload-service/issues/1135)) ([660d088](https://github.com/storacha/upload-service/commit/660d0886e468d373b142470b50282b231e645d19))
* introduce capability for changing billing plan ([#1253](https://github.com/storacha/upload-service/issues/1253)) ([d33b3a9](https://github.com/storacha/upload-service/commit/d33b3a9f72a5e7a738d2a084eb19388fa70d9433))
* make it possible to disable piece hashing ([#1351](https://github.com/storacha/upload-service/issues/1351)) ([adc498d](https://github.com/storacha/upload-service/commit/adc498db8bd2b702695b186905bd510e73b99f6a))
* move aggregate information out of deals in filecoin/info ([#1192](https://github.com/storacha/upload-service/issues/1192)) ([18dc590](https://github.com/storacha/upload-service/commit/18dc590ad50a023ef3094bfc1a2d729459e5d68e))
* move blob index logic from upload-api to blob-index lib ([#1434](https://github.com/storacha/upload-service/issues/1434)) ([797f628](https://github.com/storacha/upload-service/commit/797f6285c1b000af9eaf0240f85deca6a0b83e06))
* non-parallel piece hashing and CAR upload ([#1305](https://github.com/storacha/upload-service/issues/1305)) ([7a6385b](https://github.com/storacha/upload-service/commit/7a6385bef1dd424d5eb952528ae5d86a83837c80))
* optionally require plans for provisioning ([#1087](https://github.com/storacha/upload-service/issues/1087)) ([b24731b](https://github.com/storacha/upload-service/commit/b24731b0bdde785eef7785468cc1f49b92af2563))
* progress on blob/add handler ([9b16598](https://github.com/storacha/upload-service/commit/9b16598117aeafef1e5040af067e39beba42bbbe))
* publish index claim ([#1487](https://github.com/storacha/upload-service/issues/1487)) ([237b0c6](https://github.com/storacha/upload-service/commit/237b0c6cda70ae3e156bac8a011a2739b346ae4b))
* re-export Store implementations from w3up-client ([#1266](https://github.com/storacha/upload-service/issues/1266)) ([b3c6b46](https://github.com/storacha/upload-service/commit/b3c6b4608b5aa66290128613e029c70a870b05f1))
* remove issuer row ([#1345](https://github.com/storacha/upload-service/issues/1345)) ([cf5b0db](https://github.com/storacha/upload-service/commit/cf5b0db276ffe3b9926dbf1d8e2cd04ef7b607c9))
* remove store protocol ([d59ec88](https://github.com/storacha/upload-service/commit/d59ec883ace9c3f084772f9520b6df81cc13b7af))
* remove store protocol ([#13](https://github.com/storacha/upload-service/issues/13)) ([0028049](https://github.com/storacha/upload-service/commit/0028049f0bd3fcb816968687694c4611a5147148))
* restrict store API to CARs ([#1415](https://github.com/storacha/upload-service/issues/1415)) ([e53aa87](https://github.com/storacha/upload-service/commit/e53aa87780446458ef9a19c88877073c1470d50e))
* return allocated bytes in `store/add` receipt ([#1213](https://github.com/storacha/upload-service/issues/1213)) ([5d52e44](https://github.com/storacha/upload-service/commit/5d52e447c14e7f7fd334e7ff575e032b7b0d89d7))
* router ([#11](https://github.com/storacha/upload-service/issues/11)) ([c810735](https://github.com/storacha/upload-service/commit/c8107354da663120228f779814eafa0c9a3e80a2))
* sharing spaces ([#1551](https://github.com/storacha/upload-service/issues/1551)) ([7deb9a4](https://github.com/storacha/upload-service/commit/7deb9a47fa0e37da0cf12a8d89214e45cf09bcbb))
* strictly require nodejs version ([#1264](https://github.com/storacha/upload-service/issues/1264)) ([bc9f427](https://github.com/storacha/upload-service/commit/bc9f4279aa509ebf2a90b54fa6e68a962621b37a))
* tweak readmes to get release-please to bump major version ([#1102](https://github.com/storacha/upload-service/issues/1102)) ([a411255](https://github.com/storacha/upload-service/commit/a4112551f5dbac00f4b5a0da8c81ea35783f3ef9))
* two more interface tweaks ([#1287](https://github.com/storacha/upload-service/issues/1287)) ([bc3c364](https://github.com/storacha/upload-service/commit/bc3c36452454398ea8e0f574aed44b318561ad94))
* updates agent-store api to unblock integration with w3infra ([#1479](https://github.com/storacha/upload-service/issues/1479)) ([2998a93](https://github.com/storacha/upload-service/commit/2998a938628a924361450d24c5fc7be572acef3e))
* upgrade fr32-sha2-256-trunc254-padded-binary-tree-multihash for async hasher ([#1044](https://github.com/storacha/upload-service/issues/1044)) ([22ea6aa](https://github.com/storacha/upload-service/commit/22ea6aa1a96e619d0f924c5bd60151866f8cc6df))
* upgrade ucanto/transport to 9.1.0 in all packages to get more verbose errors from HTTP transport on non-ok response ([#1312](https://github.com/storacha/upload-service/issues/1312)) ([d6978d7](https://github.com/storacha/upload-service/commit/d6978d7ab299be76987c6533d18e6857f6998fe6))
* **upload-api:** integrate agent store for idempotence & invocation/receipt persistence  ([#1444](https://github.com/storacha/upload-service/issues/1444)) ([c9bf33e](https://github.com/storacha/upload-service/commit/c9bf33e5512397a654db933a5e6b5db0c7c22da5))
* upload-client funcs have options.piece to opt in to piece link calculation ([#1220](https://github.com/storacha/upload-service/issues/1220)) ([c38000e](https://github.com/storacha/upload-service/commit/c38000ecff19f9d402d1f1912e67153a0fe7284c))
* upload-client uploadDirectory, by default, sorts the provided files by file name to help the user call us in a way that is deterministic and minimizes cost ([#1173](https://github.com/storacha/upload-service/issues/1173)) ([8cd2555](https://github.com/storacha/upload-service/commit/8cd2555d901d7e684a9a5cc2516e5a91edd58621))
* usage/record capability definition ([#1562](https://github.com/storacha/upload-service/issues/1562)) ([98c8a87](https://github.com/storacha/upload-service/commit/98c8a87c52ef88da728225259e77f65733d2d7e6))
* use digest in `blob/accept` location commitment ([#1480](https://github.com/storacha/upload-service/issues/1480)) ([ade45eb](https://github.com/storacha/upload-service/commit/ade45eb6f9b71f4bb4fcc771345ad21e966db730))
* utility exports for better UX ([#1505](https://github.com/storacha/upload-service/issues/1505)) ([54b0d93](https://github.com/storacha/upload-service/commit/54b0d93eb1994022c935b30a0b238d825e9e93a0))
* w3up client login ([#1120](https://github.com/storacha/upload-service/issues/1120)) ([8279bf6](https://github.com/storacha/upload-service/commit/8279bf6371182709b46e83e5ac86d89ed1f292e8))
* w3up-client new release ([#1569](https://github.com/storacha/upload-service/issues/1569)) ([6989e6e](https://github.com/storacha/upload-service/commit/6989e6ecb334dcbf79c5a5cf7f4854ac452c6ef4))
* **w3up-client:** export additional modules ([#1110](https://github.com/storacha/upload-service/issues/1110)) ([5ce43bc](https://github.com/storacha/upload-service/commit/5ce43bc309f4029232f70d827f1fcc71a13c3758))
* wait for plan selection ([#1547](https://github.com/storacha/upload-service/issues/1547)) ([7fdee77](https://github.com/storacha/upload-service/commit/7fdee77cb35326807a59f368c2276f945c256874))
* wip router ([ffcd9c7](https://github.com/storacha/upload-service/commit/ffcd9c75aee61d37b7fdfc55f2d4b7bee7e9d724))


### Bug Fixes

* `encodeURIComponent` on bucket origin ([#1448](https://github.com/storacha/upload-service/issues/1448)) ([5618644](https://github.com/storacha/upload-service/commit/561864422db2ec3eaddc2d790cc4ea0406eebf32))
* access client should request blob namespace capabilities ([#1378](https://github.com/storacha/upload-service/issues/1378)) ([fc5bb4a](https://github.com/storacha/upload-service/commit/fc5bb4a83d50374e0e1a6006a8dbd655173ec498))
* access-client package.json uses https instead of git for one-webcrypto dep to help with yarn compat ([#1157](https://github.com/storacha/upload-service/issues/1157)) ([e1d0798](https://github.com/storacha/upload-service/commit/e1d079811cceb0a68da371ba422ba6147e0fae4a))
* add debugging for allocate receipt ([315f761](https://github.com/storacha/upload-service/commit/315f76194d029fd72b1f5776a0194494af82b2e4))
* add errors to exports ([#1368](https://github.com/storacha/upload-service/issues/1368)) ([27619c5](https://github.com/storacha/upload-service/commit/27619c517e66321012f1c9ba0d8edb9c0037d6ff))
* add format specifier to blob location claim URL ([#1445](https://github.com/storacha/upload-service/issues/1445)) ([9982d12](https://github.com/storacha/upload-service/commit/9982d12b0a1f9a6da3f0d4264b9a35348e189dfb))
* add whitespace to trigger a release ([#1390](https://github.com/storacha/upload-service/issues/1390)) ([ec95a0e](https://github.com/storacha/upload-service/commit/ec95a0e5cf1bc08c6eabba1214b9803fda723393))
* additional space setup steps ([#1284](https://github.com/storacha/upload-service/issues/1284)) ([42804ff](https://github.com/storacha/upload-service/commit/42804ff8b123874389f63f3b5387e6a578c3bbc9))
* aggregate accept should rely on deal tracker response to issue receipt ([#1038](https://github.com/storacha/upload-service/issues/1038)) ([42985ea](https://github.com/storacha/upload-service/commit/42985ea526984dbc51d9afbdd1e1dc35a08c0639))
* aggregate offer invocation cid wrong ([#1063](https://github.com/storacha/upload-service/issues/1063)) ([90a5a4d](https://github.com/storacha/upload-service/commit/90a5a4d815cff19d9421811a78dbefa01d486ebf))
* aggregator event tests ([#1048](https://github.com/storacha/upload-service/issues/1048)) ([4263d12](https://github.com/storacha/upload-service/commit/4263d12ad7eeb73ddd741752113c3babc93a3025))
* aggregator events inclusion record type simplified ([#1050](https://github.com/storacha/upload-service/issues/1050)) ([2131eac](https://github.com/storacha/upload-service/commit/2131eac64c5225508be41ca3cba5f924cb1e596a))
* allocation interface rename invocation to cause ([#1382](https://github.com/storacha/upload-service/issues/1382)) ([2d13042](https://github.com/storacha/upload-service/commit/2d1304243c2f21de449090261001a625008c5607))
* allow blob-index to be published to npm ([4e96e48](https://github.com/storacha/upload-service/commit/4e96e48abb01e04fe8d451a8fe47049107fac253))
* allow import memory store in the browser ([#1276](https://github.com/storacha/upload-service/issues/1276)) ([301e0fc](https://github.com/storacha/upload-service/commit/301e0fcb8941c0a517d270c9b731b24cbdf00eb9))
* authorize renamed to login in docs ([#1125](https://github.com/storacha/upload-service/issues/1125)) ([1c3e773](https://github.com/storacha/upload-service/commit/1c3e773b7e2572d68a8c64bdefc08f8839f17670))
* avoid duplicates on aggregator buffer concat ([#1259](https://github.com/storacha/upload-service/issues/1259)) ([9e64bab](https://github.com/storacha/upload-service/commit/9e64babe93edeb474fc740d9be74c709d47bed1a))
* badgers on README ([ffe49f2](https://github.com/storacha/upload-service/commit/ffe49f2be3f0a550d7561bc5ebb124de1b913735))
* bind globalThis.fetch to globalThis ([#1242](https://github.com/storacha/upload-service/issues/1242)) ([ef59358](https://github.com/storacha/upload-service/commit/ef5935831eeedd35870a56abd2c7db2bcf47d1ca))
* bootstrap sha ([cdf6737](https://github.com/storacha/upload-service/commit/cdf67371ee9df3a60f7fea90c310179b20ee2b0b))
* c8 issue ([f5055b7](https://github.com/storacha/upload-service/commit/f5055b7ff4ee9974611805a58dd274974e69c56e))
* capabilities should export blob caps ([#1376](https://github.com/storacha/upload-service/issues/1376)) ([460729e](https://github.com/storacha/upload-service/commit/460729ec296ac2656b264af442b6d3bc25aa8847))
* check for blob/accept receipts before blob/add is concluded ([#1459](https://github.com/storacha/upload-service/issues/1459)) ([462518c](https://github.com/storacha/upload-service/commit/462518ca832515c65cc674e8aef3c28f2228797d))
* check service did in w3filecoin ([#1476](https://github.com/storacha/upload-service/issues/1476)) ([11b00bf](https://github.com/storacha/upload-service/commit/11b00bf880dbbbc40b657d2417a4b13aa8c60a7d))
* cid for filecoin offer must be raw ([#1450](https://github.com/storacha/upload-service/issues/1450)) ([c3dd7b5](https://github.com/storacha/upload-service/commit/c3dd7b58e0f88f2d89d5ba12435339d839765e8c))
* compatibility with legacy w3up client ([#59](https://github.com/storacha/upload-service/issues/59)) ([7185046](https://github.com/storacha/upload-service/commit/7185046e3186bef9b4f56f9e6c1c94a0c576fc53))
* configure max pieces ([#1566](https://github.com/storacha/upload-service/issues/1566)) ([71674ed](https://github.com/storacha/upload-service/commit/71674ed90022f499a144bcc201416e2568bd4d24))
* consume response body ([9d3659e](https://github.com/storacha/upload-service/commit/9d3659e28bf4c29e6a613e1cb42751e4f13dff41))
* copy src into dist in w3up-client ([#1239](https://github.com/storacha/upload-service/issues/1239)) ([468bb79](https://github.com/storacha/upload-service/commit/468bb79cfd6cbc7d513d0174da5b3b43a3f82cba))
* dealer aggregate store query type does not need aggregate anymore ([#1042](https://github.com/storacha/upload-service/issues/1042)) ([0b3c1d0](https://github.com/storacha/upload-service/commit/0b3c1d0b891208d035abdb5bf7bf43dba853d8a7))
* dealer offer store keys without space ([#1066](https://github.com/storacha/upload-service/issues/1066)) ([301f411](https://github.com/storacha/upload-service/commit/301f411de74bca6b70c6b867c1bdc724a0a3af20))
* don't error when we can't figure out a name for a space ([#1177](https://github.com/storacha/upload-service/issues/1177)) ([a31f667](https://github.com/storacha/upload-service/commit/a31f6671b52d37b8493ca1690ca737ddd311558b))
* drop filecoin storefront skip submit queue option ([#1371](https://github.com/storacha/upload-service/issues/1371)) ([1114383](https://github.com/storacha/upload-service/commit/111438395dbd4530fade17b0d216ff056df7d832))
* enable storefront signer to be different from main service signer ([#1072](https://github.com/storacha/upload-service/issues/1072)) ([21ded3c](https://github.com/storacha/upload-service/commit/21ded3c171ca66480e4f74329943527dcc2bac3e))
* encode space DID as bytes in blob caveats ([#41](https://github.com/storacha/upload-service/issues/41)) ([6eba88d](https://github.com/storacha/upload-service/commit/6eba88d004492ea2eff19db88753d827ba267133))
* ensure idempotent ([9deef57](https://github.com/storacha/upload-service/commit/9deef577b8f79665e9df91d2c13e8747c86219f1))
* Error should refer to Resource, not Issuer ([#1558](https://github.com/storacha/upload-service/issues/1558)) ([25e35e3](https://github.com/storacha/upload-service/commit/25e35e3c3ae86be549f11861f10894c86c46cbdd))
* export blob client ([#1485](https://github.com/storacha/upload-service/issues/1485)) ([7944077](https://github.com/storacha/upload-service/commit/7944077d91d5dd154bac2760dff831a41d4f814b))
* export blob errors ([#33](https://github.com/storacha/upload-service/issues/33)) ([726ca23](https://github.com/storacha/upload-service/commit/726ca23bb2d9f891100456fb035b735280fbc185))
* export filecoin types ([#1185](https://github.com/storacha/upload-service/issues/1185)) ([9b1f526](https://github.com/storacha/upload-service/commit/9b1f52609903b40d965d51a87f8ba7a530ca74cd))
* export new subscription, usage and filecoin clients ([#1111](https://github.com/storacha/upload-service/issues/1111)) ([7fe797d](https://github.com/storacha/upload-service/commit/7fe797d4e4920ff01e668e228cc237da9f81ed9f))
* export ProgressStatus ([ab29c05](https://github.com/storacha/upload-service/commit/ab29c05a05390e63538ef71ed2dd1f65dbb326d5))
* export ShardedDAGIndex type ([979e2c3](https://github.com/storacha/upload-service/commit/979e2c3b070025e952e7bb490701aabb5e660e39))
* export Subscription type ([8c10e95](https://github.com/storacha/upload-service/commit/8c10e9506596748da288d55c63a53057f494ae8f))
* export test handlers and storages ([#1370](https://github.com/storacha/upload-service/issues/1370)) ([61de1e1](https://github.com/storacha/upload-service/commit/61de1e1eb4d2cee8eaea87913e8fd17ec17f1cd9))
* export UsageStorage ([#1334](https://github.com/storacha/upload-service/issues/1334)) ([d466211](https://github.com/storacha/upload-service/commit/d466211979e26698755f99daeaed8697c0ee2bdd))
* filecoin test use blob ([#1422](https://github.com/storacha/upload-service/issues/1422)) ([359c0b7](https://github.com/storacha/upload-service/commit/359c0b736cad8e4375d75af4f60e97e20057e7aa))
* **filecoin-api:** parallel put to piece accept queue ([#1560](https://github.com/storacha/upload-service/issues/1560)) ([e7cbb6d](https://github.com/storacha/upload-service/commit/e7cbb6dc7930b7b19335286bf1908d2ed3cb9437))
* fix export paths for JS files ([#1089](https://github.com/storacha/upload-service/issues/1089)) ([1a5d1aa](https://github.com/storacha/upload-service/commit/1a5d1aa1b1bfdb188cb69712a74404b89d8200af))
* fix IndexedDB reset function ([#1199](https://github.com/storacha/upload-service/issues/1199)) ([48cf555](https://github.com/storacha/upload-service/commit/48cf55596162f68833f4cea49364a9dd5a845362))
* Fix type references ([cc09933](https://github.com/storacha/upload-service/commit/cc09933ea0132e10f39f27304a273c443d3da3fa))
* Fix type references ([#57](https://github.com/storacha/upload-service/issues/57)) ([10e6c7d](https://github.com/storacha/upload-service/commit/10e6c7d95becbe1f804a5195b5255cf95394351b))
* floating promises and add no-floating-promises to eslint-config-w3up ([#1198](https://github.com/storacha/upload-service/issues/1198)) ([1b8c5aa](https://github.com/storacha/upload-service/commit/1b8c5aa86ec3d177bf77df4e2916699c1f522598))
* invocation config does not extend ucan options ([cb473c5](https://github.com/storacha/upload-service/commit/cb473c5db2f11188a713861af99d7270f27958b7))
* issue where typedoc docs would only show full docs for w3up-client ([#1141](https://github.com/storacha/upload-service/issues/1141)) ([0b8d3f3](https://github.com/storacha/upload-service/commit/0b8d3f3b52918b1b4d3b76ea6fea3fb0c837cd73))
* jsdoc ([5506c11](https://github.com/storacha/upload-service/commit/5506c11eeda8351dd21f6fff339057e69813eab2))
* lint ([#1095](https://github.com/storacha/upload-service/issues/1095)) ([f9cc770](https://github.com/storacha/upload-service/commit/f9cc77029d7c0651cb2961d08eca6f94dc1aef6c))
* look for the correct capability in `client.capability.upload.get` ([#1357](https://github.com/storacha/upload-service/issues/1357)) ([77199fe](https://github.com/storacha/upload-service/commit/77199fe2261355f9c24fa06ab6aa5aad419e649a))
* make login idempotent ([#1149](https://github.com/storacha/upload-service/issues/1149)) ([c1df8d8](https://github.com/storacha/upload-service/commit/c1df8d8a2cfcf3a8706028a367b1d6b75f5ebb4f))
* memory usage ([#1227](https://github.com/storacha/upload-service/issues/1227)) ([c9e7a49](https://github.com/storacha/upload-service/commit/c9e7a49a32249408d89f8cdfe39433fdd9b6a527))
* migrate repo ([#1388](https://github.com/storacha/upload-service/issues/1388)) ([10b7742](https://github.com/storacha/upload-service/commit/10b7742d3f568f4b2dc1e2f435916a9e23480952))
* migrate repo ([#1389](https://github.com/storacha/upload-service/issues/1389)) ([475a287](https://github.com/storacha/upload-service/commit/475a28743ff9f7138b46dfe4227d3c80ed75a6a2))
* missing blob-index deps ([#1467](https://github.com/storacha/upload-service/issues/1467)) ([deb8cc9](https://github.com/storacha/upload-service/commit/deb8cc97b6e21db9e863a6ae2b457cf13af5454b))
* missing export ([d72d083](https://github.com/storacha/upload-service/commit/d72d083f8815245be2562a7d7e6aabe0c4cc4b45))
* missing exports ([dec43e5](https://github.com/storacha/upload-service/commit/dec43e51ee3b22a960a3769537c04f3de55d7097))
* missing exports ([#1335](https://github.com/storacha/upload-service/issues/1335)) ([4e41ff4](https://github.com/storacha/upload-service/commit/4e41ff4498cd75853204d9ae209fe36008cd8018))
* missing test export ([1fc6808](https://github.com/storacha/upload-service/commit/1fc68087ccca5798cd9c633580025bef034bcadf))
* missing typesVersions for fetch-with-upload-progress export ([b2f4508](https://github.com/storacha/upload-service/commit/b2f4508727e4311fc626fc3c21b8a56a30caa3a0))
* one more tweak to the `PlanStorage` interface ([#1280](https://github.com/storacha/upload-service/issues/1280)) ([5a44565](https://github.com/storacha/upload-service/commit/5a44565feb33fc08102cd2559a2f22fb0476e86b))
* package metadata ([#1161](https://github.com/storacha/upload-service/issues/1161)) ([b8a1cc2](https://github.com/storacha/upload-service/commit/b8a1cc2e125a91be582998bda295e1ae1caab087))
* point `main` at files included in the package ([#1241](https://github.com/storacha/upload-service/issues/1241)) ([c0b306d](https://github.com/storacha/upload-service/commit/c0b306df75b21d0979e407f04f0a23f67d5248af))
* put access.session back ([#1100](https://github.com/storacha/upload-service/issues/1100)) ([10a1a4b](https://github.com/storacha/upload-service/commit/10a1a4bfc5ec79ea0b7b2049fd7d1953ca0810ef))
* re-export all blob types ([#30](https://github.com/storacha/upload-service/issues/30)) ([b10046b](https://github.com/storacha/upload-service/commit/b10046b6b8c6cace923081a3c0872522d98f723b))
* README with uploadDirectory, not store ([#1106](https://github.com/storacha/upload-service/issues/1106)) ([22773bf](https://github.com/storacha/upload-service/commit/22773bf7e06742658d175d0959fd3f1edcd4a0bd))
* receipt chain has wrong CID because no expiration is set ([#1060](https://github.com/storacha/upload-service/issues/1060)) ([dfb46d8](https://github.com/storacha/upload-service/commit/dfb46d8185c684a18452e1325abcf74d59c48159))
* record upload add cause ([#28](https://github.com/storacha/upload-service/issues/28)) ([6fc4311](https://github.com/storacha/upload-service/commit/6fc4311e6b0e660ab885028368992422174934b7))
* release upload api with new filecoin api service for storefront ([#1347](https://github.com/storacha/upload-service/issues/1347)) ([692751a](https://github.com/storacha/upload-service/commit/692751aa6a178ede2820990ca9a44118bd6e8e55))
* remove mention of registerSpace from w3up-client README ([#1214](https://github.com/storacha/upload-service/issues/1214)) ([38c5b37](https://github.com/storacha/upload-service/commit/38c5b3762b71e5cf70fe5d916c27b85cbfbb8c73))
* remove redundant package manager version ([#1548](https://github.com/storacha/upload-service/issues/1548)) ([3e961d9](https://github.com/storacha/upload-service/commit/3e961d92a7a8ce9aa78a8324d8bc46e57b818e92))
* remove unneeded token ([#1391](https://github.com/storacha/upload-service/issues/1391)) ([a416806](https://github.com/storacha/upload-service/commit/a416806045135de4350bd07c4023c8962caaa88a))
* rename blob and index client capabilities ([#1478](https://github.com/storacha/upload-service/issues/1478)) ([17e3a31](https://github.com/storacha/upload-service/commit/17e3a3161c6585b1844abcf7ed27252fa8580870))
* repo URLs ([#1550](https://github.com/storacha/upload-service/issues/1550)) ([e02ddf3](https://github.com/storacha/upload-service/commit/e02ddf3696553b03f8d2f7316de0a99a9303a60f))
* reset bucket after use ([689904e](https://github.com/storacha/upload-service/commit/689904e6aca25bc6efde181448f4d5a68869854d))
* return correct response for index extract error ([67ef2b0](https://github.com/storacha/upload-service/commit/67ef2b02ab2d745e4a2f023cf03f58c2a6ee1e2f))
* return piece accept receipt error ([#1512](https://github.com/storacha/upload-service/issues/1512)) ([05283cf](https://github.com/storacha/upload-service/commit/05283cfc8ace5e8716d6557a8e29402ef4a2e3c0))
* reuse http/put and blob/accept receipts when available ([#1495](https://github.com/storacha/upload-service/issues/1495)) ([416802e](https://github.com/storacha/upload-service/commit/416802e458734d638476078235526830dfdc21ca))
* revert "feat: upload-client funcs have options.piece to opt in to piece link calculation ([#1220](https://github.com/storacha/upload-service/issues/1220)) ([#1224](https://github.com/storacha/upload-service/issues/1224)) ([2f238bf](https://github.com/storacha/upload-service/commit/2f238bfe9eb9d4c184737069c9ecea10a2c4f9b3))
* revert blob add by default ([#1456](https://github.com/storacha/upload-service/issues/1456)) ([b77ec75](https://github.com/storacha/upload-service/commit/b77ec750c3911f6f47fa32a5e1560858b347985c))
* revert enable storefront signer to be different from main service signer ([#1075](https://github.com/storacha/upload-service/issues/1075)) ([80cdde0](https://github.com/storacha/upload-service/commit/80cdde0f5b610cf6328dc17cb505759eddda821a))
* stop writing to DUDEWHERE ([#1500](https://github.com/storacha/upload-service/issues/1500)) ([cf0a1d6](https://github.com/storacha/upload-service/commit/cf0a1d6e08d515854080899e57d16dca420f81e6))
* storage operation failed type name instead of store ([#1374](https://github.com/storacha/upload-service/issues/1374)) ([a99251e](https://github.com/storacha/upload-service/commit/a99251efc712888bf76270a4fe372163f938eddf))
* storefront content store rename and separation for test ([#1409](https://github.com/storacha/upload-service/issues/1409)) ([05e5db3](https://github.com/storacha/upload-service/commit/05e5db35544c935a6c8e65e8f27583cffcf224e1))
* storefront events cron with max concurrency ([#1191](https://github.com/storacha/upload-service/issues/1191)) ([11010c9](https://github.com/storacha/upload-service/commit/11010c94b9682e93b6209a169871021d37b76011))
* storefront principal type on cron ([#1055](https://github.com/storacha/upload-service/issues/1055)) ([3821804](https://github.com/storacha/upload-service/commit/382180470add316dd48d01842f302e30edf870a0))
* support storing ArrayBuffers in conf ([#1236](https://github.com/storacha/upload-service/issues/1236)) ([9b1aafb](https://github.com/storacha/upload-service/commit/9b1aafbcf241d268e4f365ed99005458dda1a05a))
* sync space names from proofs ([#1193](https://github.com/storacha/upload-service/issues/1193)) ([f552036](https://github.com/storacha/upload-service/commit/f552036913cf7172e93e83e27fd4af6f7b6a4673))
* test against actual api ([#1438](https://github.com/storacha/upload-service/issues/1438)) ([f8132ca](https://github.com/storacha/upload-service/commit/f8132ca1fced72a4addc7e9f0a2162e823c1ea5f))
* **test:** await promise and check error ([#1563](https://github.com/storacha/upload-service/issues/1563)) ([86e7a46](https://github.com/storacha/upload-service/commit/86e7a46e289ee176fcfa6827827302510434ffb5))
* tests ([b179910](https://github.com/storacha/upload-service/commit/b179910a3b5259a1da0607340d23669c30e34c9e))
* thanks prettier ([11e34b4](https://github.com/storacha/upload-service/commit/11e34b40af2485757f8ba2056c08a100677dc393))
* thread abort signal through login functions ([#1189](https://github.com/storacha/upload-service/issues/1189)) ([8e908a9](https://github.com/storacha/upload-service/commit/8e908a9fbacaedb40fdaf214f862720fb8454fca))
* trigger capabilities release ([#1399](https://github.com/storacha/upload-service/issues/1399)) ([7d9ab35](https://github.com/storacha/upload-service/commit/7d9ab354d194b751bb7f34ffa2f74e7465cb40e2))
* trigger commit for release of w3up client ([#1070](https://github.com/storacha/upload-service/issues/1070)) ([8edcbf8](https://github.com/storacha/upload-service/commit/8edcbf827269495a112272b1e59ee6a286b5bd3b))
* trigger release ([f0f9a56](https://github.com/storacha/upload-service/commit/f0f9a56bb28bc50e33845f07c859cd209562a338))
* trigger release ([3fc3fc2](https://github.com/storacha/upload-service/commit/3fc3fc24f3d4b813249b714a23bbe4f69011ab76))
* trigger release ([fe6038c](https://github.com/storacha/upload-service/commit/fe6038c2efca3a2cbdc3b8dc6221e36fc53bccc7))
* trigger release ([9eadccc](https://github.com/storacha/upload-service/commit/9eadcccb7aac944ea571acf5f39e9880b2914168))
* trigger release ([0bf74f4](https://github.com/storacha/upload-service/commit/0bf74f44183e38d298308ccd469589c07cd760b0))
* trigger release for upload api ([#1107](https://github.com/storacha/upload-service/issues/1107)) ([9930b10](https://github.com/storacha/upload-service/commit/9930b10962d365303ae45467a44f414aeac3dccb))
* trigger w3up client release with new client ([#1497](https://github.com/storacha/upload-service/issues/1497)) ([9616f0d](https://github.com/storacha/upload-service/commit/9616f0d64d342e2e1c9524e900549ff94471a10e))
* try remove bootstrap sha ([733ff7a](https://github.com/storacha/upload-service/commit/733ff7af356ca2d881a5a680c58b8634991b70d4))
* ucan conclude scheduler invocation type and improve test ([#1379](https://github.com/storacha/upload-service/issues/1379)) ([11e0864](https://github.com/storacha/upload-service/commit/11e0864bfdc49852127d2d55ef08954d775d7901))
* update "byo agent" example to match website snippet ([#1268](https://github.com/storacha/upload-service/issues/1268)) ([e34eed1](https://github.com/storacha/upload-service/commit/e34eed1fa3d6ef24ce2c01982764f2012dbf30d8))
* update data-segment dep ([228ff79](https://github.com/storacha/upload-service/commit/228ff7933219a0bf9ead371bb845d20a4859fda5))
* update fr32 lib to support wasm import ([#1294](https://github.com/storacha/upload-service/issues/1294)) ([4a00845](https://github.com/storacha/upload-service/commit/4a00845bfaf9d1481501dc9f2c2c818aeee06dd6))
* upgrade @ucanto/validator with bugfix ([#1151](https://github.com/storacha/upload-service/issues/1151)) ([d4e961b](https://github.com/storacha/upload-service/commit/d4e961bab09e88245e7d9323146849271e78eb57))
* upgrade filecoin client deal tracker principal ([#1092](https://github.com/storacha/upload-service/issues/1092)) ([cde7113](https://github.com/storacha/upload-service/commit/cde71134ab8fdd4a72e3764da30ae0a414a8690b))
* upgrade fr32-sha2-256-trunc-254-padded-binary-tree-multihash to 3.1.1. ([#1223](https://github.com/storacha/upload-service/issues/1223)) ([0801d90](https://github.com/storacha/upload-service/commit/0801d90a5acbdcca65e1afd8046021a01f8d60e8))
* upgrade pnpm ([1204fe3](https://github.com/storacha/upload-service/commit/1204fe3dd019a791958227e2328c54868c73c1a9))
* upgrade release please ([577f525](https://github.com/storacha/upload-service/commit/577f525f2a944d4aa216e091e83af1dedbfcd44a))
* upgrade type-fest in access ([#1263](https://github.com/storacha/upload-service/issues/1263)) ([47a4589](https://github.com/storacha/upload-service/commit/47a458964aaf1ebe07db4e29db60e558b9871fb6))
* upgrade ucanto core ([#1127](https://github.com/storacha/upload-service/issues/1127)) ([5ce4d22](https://github.com/storacha/upload-service/commit/5ce4d2292d7e980da4a2ea0f1583f608a81157d2))
* upgrade ucanto libs and format filecoin api ([#1359](https://github.com/storacha/upload-service/issues/1359)) ([87ca098](https://github.com/storacha/upload-service/commit/87ca098186fe204ff3409a2684719f1c54148c97))
* upload API test fixes ([6b0d72d](https://github.com/storacha/upload-service/commit/6b0d72dee3dc9ce5320ad8de333a718d644b5c3d))
* upload client does not need cors mode on presigned url put ([#1295](https://github.com/storacha/upload-service/issues/1295)) ([ef70a2b](https://github.com/storacha/upload-service/commit/ef70a2b45d98583842c95980e5c6de5d20870e0d))
* upload client export blob ([#1454](https://github.com/storacha/upload-service/issues/1454)) ([5e55900](https://github.com/storacha/upload-service/commit/5e55900870dcb72d7f53d0cd37990c8279b89b15))
* upload client should perform filecoin offer ([#1333](https://github.com/storacha/upload-service/issues/1333)) ([466e3f7](https://github.com/storacha/upload-service/commit/466e3f79733c30f864cb21e7ed0f0684945417ed))
* use an ArrayBuffer for delegation bits in AgentData ([#1219](https://github.com/storacha/upload-service/issues/1219)) ([bddf874](https://github.com/storacha/upload-service/commit/bddf87445755fa977768d636481eaee678a06e79))
* use configured receipts endpoint ([2e452c0](https://github.com/storacha/upload-service/commit/2e452c0c75e1ba34a6c5cb4cb3cd3a7c9f1c01ba))
* use MultihashDigest type in stores ([#1474](https://github.com/storacha/upload-service/issues/1474)) ([6c6a3bd](https://github.com/storacha/upload-service/commit/6c6a3bdcb924cf6f9a4723f710a27f1ae34ca560))
* use one-webcrypto from npm ([#1525](https://github.com/storacha/upload-service/issues/1525)) ([9345c54](https://github.com/storacha/upload-service/commit/9345c5415bc0b0d6ce8ccdbe92eb155b11835fd8))
* warnings ([0e77fde](https://github.com/storacha/upload-service/commit/0e77fde238821403c33d35d53ada4384b2c69724))


### Reverts

* renames for web3.storage capabilities ([ac49094](https://github.com/storacha/upload-service/commit/ac4909477ed918f33768b1b0d1ba7cfcfa55e8dd))
